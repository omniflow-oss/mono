FROM maven:3.9.9-eclipse-temurin-21

RUN apt-get update && apt-get install -y \
  curl \
  gnupg \
  ca-certificates \
  git \
  unzip \
  bash \
  && rm -rf /var/lib/apt/lists/*

RUN curl -fsSL https://deb.nodesource.com/setup_20.x | bash - \
  && apt-get update && apt-get install -y nodejs \
  && rm -rf /var/lib/apt/lists/*

RUN curl -sSL https://taskfile.dev/install.sh | sh -s -- -b /usr/local/bin

RUN corepack enable \
  && corepack prepare pnpm@9.15.0 --activate

WORKDIR /work
